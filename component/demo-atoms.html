<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tea Color Palette Atoms Library</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            transition: all 0.3s ease;
            background-color: var(--background-color, #f0f0f0);
            color: var(--text-color, #333);
        }

        .component-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .component-section {
            /* background-color: rgba(255,255,255,0.7); */
            padding: 15px;
            border-radius: 8px;
            /* box-shadow: 0 4px 6px rgba(0,0,0,0.1); */
        }

        #tea-select {
            width: 100%;
            margin-bottom: 20px;
        }

        /* Improve option styling */
        select option {
            padding: 10px;
        }

        #color-swatch-section {
            grid-column: 1 / -1;
        }
        
        /* Added for demo spacing */
        .component-section h3 {
            margin-bottom: 15px;
        }
        
        .badge-container, .icon-button-container {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
    </style>
</head>
<body>
    <h1>Tea Color Palette Atoms Library</h1>
    
    <div id="tea-select-container"></div>
    
    <!-- Add search component at the top -->
    <div id="search-container" style="margin-bottom: 20px;"></div>

    <div class="component-grid">
        <div class="component-section">
            <h3>Text Input</h3>
            <div id="text-input-container"></div>
        </div>

        <div class="component-section">
            <h3>Toggle</h3>
            <div id="toggle-container"></div>
        </div>

        <div class="component-section">
            <h3>Chips</h3>
            <div id="chips-container"></div>
        </div>

        <div class="component-section">
            <h3>Progress Bar</h3>
            <div id="progress-container"></div>
        </div>
        
        <!-- Add new Badge component section -->
        <div class="component-section">
            <h3>Badges</h3>
            <div id="badge-container" class="badge-container"></div>
        </div>
        
        <!-- Add new Icon Button component section -->
        <div class="component-section">
            <h3>Icon Buttons</h3>
            <div id="icon-button-container" class="icon-button-container"></div>
        </div>

        <div class="component-section">
            <h3>Radio Group</h3>
            <div id="radio-container"></div>
        </div>

        <div class="component-section">
            <h3>Checkbox</h3>
            <div id="checkbox-container"></div>
        </div>

        <div id="color-swatch-section" class="component-section">
            <h3>Color Variations</h3>
            <div id="color-swatch-container"></div>
        </div>
    
        <div id="color-details-section" class="component-section">
            <h3>Color Details</h3>
            <div id="color-details-container"></div>
        </div>
    </div>

    <script type="module">
        import TeaAtoms from './tea-atoms-lib.js';
        import { TeaThemeGenerator, TeaColorPalette } from './theme-generator.js';

        // Create tea type selector
        const teaSelect = TeaAtoms.createSelectMenu(TeaColorPalette);
        teaSelect.id = 'tea-select';
        document.getElementById('tea-select-container').appendChild(teaSelect);
        
        // Add search component
        const searchInput = TeaAtoms.createSearchInput({
            placeholder: 'Search teas...',
            maxWidth: '500px',
            onInput: (value) => {
                console.log('Searching for:', value);
                // Just for demo - highlight chips that match search
                document.querySelectorAll('.tea-chip').forEach(chip => {
                    if (value && chip.textContent.toLowerCase().includes(value.toLowerCase())) {
                        chip.style.borderWidth = '2px';
                        chip.style.transform = 'scale(1.05)';
                    } else {
                        chip.style.borderWidth = '1px';
                        chip.style.transform = 'scale(1)';
                    }
                });
            },
            onClear: () => {
                console.log('Search cleared');
                // Reset chip highlighting
                document.querySelectorAll('.tea-chip').forEach(chip => {
                    chip.style.borderWidth = '1px';
                    chip.style.transform = 'scale(1)';
                });
            }
        });
        document.getElementById('search-container').appendChild(searchInput);

        // Add event listener for theme change
        teaSelect.addEventListener('change', (e) => {
            const selectedTeaType = e.target.value;
            
            // Apply theme
            TeaThemeGenerator.applyTheme(selectedTeaType);

            // Update color swatch display
            const swatchContainer = document.getElementById('color-swatch-container');
            swatchContainer.innerHTML = ''; // Clear previous swatches
            swatchContainer.appendChild(
                TeaThemeGenerator.createColorSwatchDisplay(selectedTeaType)
            );
        
            // Update color details display
            const detailsContainer = document.getElementById('color-details-container');
            detailsContainer.innerHTML = ''; // Clear previous details
            detailsContainer.appendChild(
                TeaThemeGenerator.createColorDetailsDisplay(selectedTeaType)
            );
        });

        // Initialize with Green Tea theme
        TeaThemeGenerator.applyTheme('Green Tea');

        // Initial color swatch display
        const swatchContainer = document.getElementById('color-swatch-container');
        swatchContainer.appendChild(
            TeaThemeGenerator.createColorSwatchDisplay('Green Tea')
        );

        const detailsContainer = document.getElementById('color-details-container');
        detailsContainer.appendChild(
            TeaThemeGenerator.createColorDetailsDisplay('Green Tea')
        );
        
        // Populate components
        document.getElementById('text-input-container')
            .appendChild(TeaAtoms.createTextInput({ 
                placeholder: 'Enter your tea preference' 
            }));

        document.getElementById('toggle-container')
            .appendChild(TeaAtoms.createToggle());

        const chipsContainer = document.getElementById('chips-container');
        Object.keys(TeaColorPalette).forEach(chipText => {
            chipsContainer.appendChild(TeaAtoms.createChip(chipText));
        });

        document.getElementById('progress-container')
            .appendChild(TeaAtoms.createProgressBar(65));
            
        // Add badges
        const badgeContainer = document.getElementById('badge-container');
        ['Black', 'Green', 'Oolong', 'White', 'Pu\'er'].forEach(category => {
            // Get the actual color for this tea type if it exists in palette
            const color = TeaColorPalette[category + ' Tea'] || null;
            badgeContainer.appendChild(TeaAtoms.createBadge(category, color));
        });
        
        // Add icon buttons
        const iconButtonContainer = document.getElementById('icon-button-container');
        const icons = ['🍵', '☕', '♨️', '⏱️', '🔍'];
        const labels = ['Brew', 'Hot', 'Steam', 'Timer', 'Search'];
        
        icons.forEach((icon, index) => {
            const button = TeaAtoms.createIconButton(icon, labels[index]);
            iconButtonContainer.appendChild(button);
        });

        const radioContainer = document.getElementById('radio-container');
        const radioGroup = TeaAtoms.createRadioGroup([
            'Hot', 'Iced', 'Latte', 'Frappe'
        ]);
        radioContainer.appendChild(radioGroup);

        const checkboxContainer = document.getElementById('checkbox-container');
        ['Organic', 'Fair Trade', 'Loose Leaf'].forEach(checkboxText => {
            checkboxContainer.appendChild(
                TeaAtoms.createCheckbox(checkboxText)
            );
        });
    </script>
</body>
</html>
